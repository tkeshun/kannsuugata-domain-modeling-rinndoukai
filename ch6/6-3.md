# 型システムによる普遍条件の強制
不変条件とは、他に何が起こっても真のままである条件です

たとえば、
- UnitQuantity は常に 1 から 1000 の間
- 注文には常に少なくとも 1 つの注文明細がある
は不変条件の例です

UnitQuantity の場合とは異なり、注文が注文履歴を1つ以上持つ事は型システムで表現できます

NonEmptyList 型を定義を定義して listが空でないことを表現します

```go
package main

import "fmt"

type NonEmptyList[T any] struct {
	First T
	Rest  []T
}

func NewNonEmptyList[T any](first T, rest ...T) NonEmptyList[T] {
	return NonEmptyList[T]{First: first, Rest: rest}
}
```

Order 型は、通常のリスト型の代わりにこの型を使用します

```go
// Order の定義
type Order struct {
	OrderLines []NonEmptyList
}
```

この変更により、「注文には常に少なくとも 1 つの注文行がある」という制約が自動的に適用されるようになりました

この自己文書化により、要件に対する単体テストを記述する必要がなくなりました
