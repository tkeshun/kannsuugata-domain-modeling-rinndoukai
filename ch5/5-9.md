# 5.9 すべてを組み合わせる
- パッケージ名は境界づけられたコンテキストで分かれるように
- IDなどは、intかstringかGuidかまだわからないので、とりあえず`Undefined`型

```go
package order

type Undefined interface{}

// 製品コード
type WidgetCode string
type GizmoCode string
type ProductCode interface {
    WidgetCode | GizmoCode
}

// 注文数量関連
type UnitQuantity int
type KilogramQuantity float64
type OrderQuantity interface {
    UnitQuantity | KilogramQuantity
}

type OrderId Undefined
type OrderLineId Undefined
type CustomerId Undefined
type CustomerInfo Undefined
type ShippingAddress Undefined
type BillingAddress Undefined
type Price Undefined
type BillingAmount Undefined

// エンティティ
type Order struct{
  Id OrderId
  CustomerId CustomerId
  ShippingAddress ShippingAddress
  BillingAddress BillingAddress
  OrderLines []OrderLine
  AmountToBill BillingAmount
}

type OrderLine struct {
    Id OrderLineId
    OrderId OrderId
    ProductCode ProductCode
    OrderQuantity OrderQuantity
    Price Price
}

type UnvalidatedOrder struct {
    OrderId string
    CustomerInfo Undefined
    ShippingAddress string
}

type PlaceOrderEvents struct {
    AcknowledgementSent Undefined
    OrderPlaced Undefined
    BillableOrderPlaced Undefined
}

type PlaceOrderError []ValidationError
type ValidationError struct {
  FieldName string
  ErrorDescription string
}
```

「注文確定」ワークフローは関数の型として表す
```go
func PlaceOrder(unvalidatedOrder UnvalidatedOrder) (PlaceOrderEvents, PlaceOrderError)
```

## 5.9.1 課題の再検討：型はドキュメントの代わりになるか？
「ドメインの要件を、ドメインエキスパートや開発者以外の人達がレビューできるような方法で、型システムに取り込む」ことができるか？

出来上がった F# のコードは、最初の（2章で出てきた）ドキュメントとほぼ同じ。
単純型、AND型、OR型、プロセスの構文を理解する必要があるが、それだけ。

# 5.10 まとめ
- 型システムを使ってドメインをモデル化する
  - ユビキタス言語を使う
  - string や int を使わない
  - Manager や Handler は出てこない
- DDDの概念
  - 値オブジェクト
  - エンティティ
  - 集約
- 設計＝コード になった
